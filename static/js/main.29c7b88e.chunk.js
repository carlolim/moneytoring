(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,a){e.exports=a.p+"static/media/aplaya.a75f6366.png"},168:function(e,t,a){e.exports=a.p+"static/media/thinking-meme.a19dae0e.png"},227:function(e,t,a){e.exports=a(397)},393:function(e,t,a){},395:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(38),o=a.n(s),c=a(10),l=a(11),i=a(13),u=a(12),m=a(14),d=a(401),h=a(400),p=a(15),g=a.n(p),y=a(26),f=a(3),b=a(17),E=a(55),v=a.n(E),w=a(56),O=a.n(w),k=a(35),x=a.n(k),j=a(27),C=a.n(j),I=a(164),D=a.n(I),S=a(398),N=a(1),M=a(161),A=a.n(M),B=a(85),P=a.n(B),T=a(162),F=a.n(T),q=a(163),Y=a.n(q),R=a(86),V=a.n(R),z=a(159),H={background:{backgroundImage:"url(".concat(a.n(z).a,")"),height:150,backgroundSize:"cover",backgroundRepeat:"no-repeat"},appDetailsHolder:{position:"relative",paddingLeft:15,height:"100%"},appName:{color:"white",position:"absolute",bottom:24,fontSize:20},email:{color:"#9e9e9e",position:"absolute",bottom:14,fontSize:"0.8rem"},drawer:{width:250},navLink:{textDecoration:"none"}},L=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.classes.drawer},r.a.createElement("div",{className:this.props.classes.background},r.a.createElement("div",{className:this.props.classes.appDetailsHolder},r.a.createElement(N.D,{className:this.props.classes.appName},"moneytoring"),r.a.createElement(N.D,{className:this.props.classes.email},"carlojameslim1@gmail.com"))),r.a.createElement(N.t,null,r.a.createElement(S.a,{to:"/",className:this.props.classes.navLink},r.a.createElement(N.u,null,r.a.createElement(N.v,null,r.a.createElement(A.a,null)),r.a.createElement(N.x,{primary:"Dashboard"}))),r.a.createElement(S.a,{to:"/expense",className:this.props.classes.navLink},r.a.createElement(N.u,null,r.a.createElement(N.v,null,r.a.createElement(P.a,null)),r.a.createElement(N.x,{primary:"Expense"}))),r.a.createElement(S.a,{to:"/expensetemplates",className:this.props.classes.navLink},r.a.createElement(N.u,null,r.a.createElement(N.v,null,r.a.createElement(V.a,null)),r.a.createElement(N.x,{primary:"Expense templates"}))),r.a.createElement(S.a,{to:"/budget",className:this.props.classes.navLink},r.a.createElement(N.u,null,r.a.createElement(N.v,null,r.a.createElement(F.a,null)),r.a.createElement(N.x,{primary:"Budget"}))),r.a.createElement(N.l,null),r.a.createElement(S.a,{to:"/settings",className:this.props.classes.navLink},r.a.createElement(N.u,null,r.a.createElement(N.v,null,r.a.createElement(Y.a,null)),r.a.createElement(N.x,{primary:"Settings"})))))}}]),t}(n.Component),W=Object(b.withStyles)(H)(L),G=a(82),J=a.n(G),K={root:{flexGrow:1,paddingTop:56},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}},U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.toggleDrawer=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:K.root},r.a.createElement(J.a,{open:this.state.isOpen,onClose:this.toggleDrawer,onOpen:this.toggleDrawer,disableBackdropTransition:!0},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer,onKeyDown:this.toggleDrawer},r.a.createElement(W,null))),r.a.createElement(v.a,{position:"fixed"},r.a.createElement(O.a,null,r.a.createElement(C.a,{onClick:this.toggleDrawer,style:K.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(D.a,null)),r.a.createElement(x.a,{variant:"h6",color:"inherit",style:K.grow},this.props.title),this.props.buttons.map(function(e,t){return r.a.createElement("span",{color:"inherit",key:t},e)}))))}}]),t}(n.Component),$=a(40),Q=a.n($),X=a(165),Z=a.n(X),_=a(7),ee=a.n(_),te=a(80),ae=a.n(te),ne=a(84),re=a.n(ne),se=a(83),oe=a.n(se),ce=a(81),le=a.n(ce),ie=a(57),ue=a.n(ie),me=a(87),de=a.n(me),he=a(88),pe=a.n(he),ge=function(e,t,a,n){t=isNaN(t=Math.abs(t))?2:t,a=void 0===a?".":a,n=void 0===n?",":n;var r=e<0?"-":"",s=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),o=(o=s.length)>3?o%3:0;return r+(o?s.substr(0,o)+n:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(e-s).toFixed(t).slice(2):"")},ye=function(e,t){return new Promise(function(a,n){indexedDB.open("Moneytoring").onsuccess=function(n){n.target.result.transaction([e],"readonly").objectStore(e).get(t).onsuccess=function(e){a(e.target.result)}}})},fe=function(e){return new Promise(function(t,a){indexedDB.open("Moneytoring").onsuccess=function(a){a.target.result.transaction([e],"readonly").objectStore(e).getAll().onsuccess=function(e){t(e.target.result)}}})},be=function(e,t){return new Promise(function(a,n){indexedDB.open("Moneytoring").onsuccess=function(n){n.target.result.transaction([e],"readonly").objectStore(e).get(t).onsuccess=function(e){a(e.target.result)}}})},Ee=function(e,t,a){indexedDB.open("Moneytoring").onsuccess=function(n){var r=n.target.result.transaction([e],"readwrite");r.objectStore(e).put(t),r.oncomplete=function(e){a(!0)},r.onerror=function(e){a(!1)}}},ve=function(e,t){return new Promise(function(a,n){indexedDB.open("Moneytoring").onsuccess=function(r){var s=r.target.result.transaction([e],"readwrite");s.objectStore(e).put(t),s.oncomplete=function(e){a(!0)},s.onerror=function(e){n(!1)}}})},we=function(e,t,a){indexedDB.open("Moneytoring").onsuccess=function(n){var r=n.target.result.transaction([e],"readwrite");r.objectStore(e).put(t),r.oncomplete=function(e){a(!0)},r.onerror=function(e){a(!1)}}},Oe=function(e,t){return new Promise(function(a,n){indexedDB.open("Moneytoring").onsuccess=function(r){var s=r.target.result.transaction([e],"readwrite");s.objectStore(e).put(t),s.oncomplete=function(e){a(!0)},s.onerror=function(e){n(!1)}}})},ke=function(e,t){return new Promise(function(a,n){indexedDB.open("Moneytoring").onsuccess=function(r){var s=r.target.result.transaction([e],"readwrite");s.objectStore(e).delete(t),s.oncomplete=function(e){a(!0)},s.onerror=function(e){n(!1)}}})},xe={none:0,daily:1,weekly:2,monthly:3,custom:4},je={daily:1,weekly:2,monthly:3},Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getExpensesForCategory=function(e,t){var a=e.filter(function(e){return e.categoryId===t});return{data:a,subTotal:a.reduce(function(e,t){return t.amount+e},0)}},a.state={filterType:je.daily,from:ee()().hours(0).minutes(0).seconds(0),to:ee()().hours(23).minutes(59).seconds(59),filterDate:"",data:[],total:0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadSummary()}},{key:"generateFilterDate",value:function(){var e=this.state.from.format("MMM DD [(]ddd[)]");this.state.filterType!==je.daily&&(e=this.state.from.format("MMM DD")+" - "+this.state.to.format("MMM DD")),this.setState(Object(f.a)({},this.state,{filterDate:e}))}},{key:"loadSummary",value:function(){var e=this,t=IDBKeyRange.bound(this.state.from.toDate(),this.state.to.toDate()),a=[],n=[],r=0,s=[];indexedDB.open("Moneytoring").onsuccess=function(o){var c=o.target.result.transaction(["expense","category"],"readonly"),l=c.objectStore("expense").index("date").openCursor(t,"prev"),i=c.objectStore("category").getAll();l.onsuccess=function(e){var t=e.target.result;t&&(a.push(t.value),r+=t.value.amount,t.continue())},i.onsuccess=function(e){n=e.target.result},c.oncomplete=function(){for(var t=0;t<n.length;t++){var o=e.getExpensesForCategory(a,n[t].categoryId);s.push({category:n[t],subTotal:o.subTotal,items:o.data})}e.setState(Object(f.a)({},e.state,{data:s,total:r})),e.generateFilterDate()}}}},{key:"changeFilterType",value:function(){}},{key:"next",value:function(){this.setState(Object(f.a)({},this.state,{from:this.state.from.add(1,"days"),to:this.state.to.add(1,"days")})),this.loadSummary()}},{key:"prev",value:function(){this.setState(Object(f.a)({},this.state,{from:this.state.from.subtract(1,"days"),to:this.state.to.subtract(1,"days")})),this.loadSummary()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ae.a,{className:e.card},r.a.createElement(oe.a,{action:r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{onClick:this.prev.bind(this)},r.a.createElement(de.a,null)),r.a.createElement(C.a,{onClick:this.next.bind(this)},r.a.createElement(pe.a,null))),title:"Expense",subheader:this.state.filterDate}),r.a.createElement(ue.a,null),r.a.createElement(le.a,{className:e.cardContent},this.state.data.map(function(t,a){return t.items.length>0?r.a.createElement("div",{key:a},r.a.createElement(x.a,{variant:"overline"},t.category.name,r.a.createElement("span",{style:{float:"right"}},ge(t.subTotal))),r.a.createElement("div",{className:e.expenseItem},t.items.map(function(e,t){return r.a.createElement(x.a,{key:t,variant:"caption"},e.title,r.a.createElement("span",{style:{float:"right"}},ge(e.amount)))})),r.a.createElement(ue.a,{light:!0})):null}),0===this.state.total?r.a.createElement(x.a,{variant:"body1",className:e.nothingToDoHere},"no expense yet, go buy something, enjoy your money!"):null),r.a.createElement(ue.a,null),r.a.createElement(re.a,{className:e.cardFooter},r.a.createElement(x.a,{component:"p"},ge(this.state.total))))}}]),t}(n.Component),Ie=Object(b.withStyles)({card:{minWidth:275},cardContent:{height:150,overflowY:"auto"},cardFooter:{float:"right"},expenseItem:{marginLeft:20},nothingToDoHere:{paddingTop:35,textAlign:"center"}})(Ce),De=function(e,t,a){return new Promise(function(n,r){var s,o,c,l;(s="expense",o="date",c=e.startDate,l=e.endDate,new Promise(function(e,t){indexedDB.open("Moneytoring").onsuccess=function(t){var a=t.target.result.transaction([s],"readonly"),n=a.objectStore(s),r=IDBKeyRange.bound(c,l),i=n.index(o).openCursor(r,"prev"),u=[];i.onsuccess=function(e){var t=e.target.result;t&&(u.push(t.value),t.continue())},a.oncomplete=function(){e(u)}}})).then(function(e){if(-1!==t.indexOf(0)&&-1!==a.indexOf(0))n(e);else{for(var r=[],s=0;s<e.length;s++)console.log(e[s],a,t),-1===a.indexOf(e[s].categoryId)&&-1===a.indexOf(0)||-1===t.indexOf(e[s].accountId)&&-1===t.indexOf(0)||r.push(e[s]);n(r)}})})},Se=function(e){var t=function(e){return e.repeat===xe.daily?"day":e.repeat===xe.weekly?"week":e.repeat===xe.monthly?"month":void 0}(e);if(t&&ee()(e.startDate).startOf(t).toDate()<=ee()().startOf(t).toDate()&&(e.noEndDate||ee()(e.endDate).endOf(t).toDate()>=ee()().endOf(t))){var a=e.ledger.find(function(e){return e.startDate.toString()===ee()().startOf(t).toDate().toString()&&e.endDate.toString()===ee()().endOf(t).toDate().toString()});return void 0!==a&&null!==a||(a={startDate:ee()().startOf(t).toDate(),endDate:ee()().endOf(t).toDate(),spent:0,amount:e.amount}),a}return null},Ne=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={spent:0},a.progressBarClassName=function(e){var t={colorPrimary:a.props.classes.progressGreen,barColorPrimary:a.props.classes.progressBarGreen};return e>50&&e<=75?(t.colorPrimary=a.props.classes.progressYellow,t.barColorPrimary=a.props.classes.progressBarYellow):e>75&&(t.colorPrimary=a.props.classes.progressRed,t.barColorPrimary=a.props.classes.progressBarRed),t},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;De(this.props.budget.ledger[0],this.props.budget.accountIds,this.props.budget.categoryIds).then(function(t){if(t.length>0){for(var a=0,n=0;n<t.length;n++)a+=t[n].amount;e.setState(Object(f.a)({},e.state,{spent:a}))}})}},{key:"render",value:function(){return r.a.createElement(N.d,{className:this.props.classes.card},r.a.createElement(N.e,null,r.a.createElement(N.D,{className:this.props.classes.title,variant:"title",color:"textPrimary",gutterBottom:!0},this.props.budget.name),r.a.createElement(N.D,{variant:"overline",className:this.props.classes.textCenter},"Total: ",ge(this.props.budget.amount)),r.a.createElement(N.s,{variant:"determinate",value:this.state.spent/this.props.budget.amount*100,classes:this.progressBarClassName(this.state.spent/this.props.budget.amount*100)}),r.a.createElement("div",null,r.a.createElement(N.D,{variant:"caption",className:this.props.classes.lineHeight},"Spent",r.a.createElement("br",null),ge(this.state.spent)),r.a.createElement(N.D,{variant:"caption",className:"".concat(this.props.classes.lineHeight," ").concat(this.props.classes.floatRight)},"Remaining",r.a.createElement("br",null),ge(this.props.budget.amount-this.state.spent)))))}}]),t}(n.Component),Me=Object(b.withStyles)({card:{minWidth:275,marginBottom:10},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},progressGreen:{backgroundColor:"#b2dfdb"},progressBarGreen:{backgroundColor:"#00695c"},progressYellow:{backgroundColor:"#eaec60"},progressBarYellow:{backgroundColor:"#bfc11d"},progressRed:{backgroundColor:"#ec8686"},progressBarRed:{backgroundColor:"#de0b0b"},lineHeight:{lineHeight:1,marginTop:5,display:"inline-block"},floatRight:{float:"right",textAlign:"right"},textCenter:{textAlign:"center"}})(Ne),Ae=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showMenu:!1,daily:[],weekly:[],monthly:[],nonRepeating:[],expenseTemplates:[]},a.toggleMenu=function(){a.setState(Object(f.a)({},a.state,{showMenu:!a.state.showMenu}))},a.newExpense=function(e){null===e?a.props.history.push("/expense/new"):a.props.history.push("/expense/new/".concat(e))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadBudgets(),this.loadExpenseTemplates()}},{key:"loadBudgets",value:function(){var e=this;fe("budget").then(function(t){for(var a=[],n=[],r=[],s=[],o=0;o<t.length;o++){var c=t[o];if(c.showInDashboard)if(c.repeat){var l=Se(c);null!=l&&(c.ledger=[l],c.repeat===xe.daily?a.push(c):c.repeat===xe.weekly?n.push(c):c.repeat===xe.monthly&&r.push(c))}else c.ledger[0].endDate=c.noEndDate?new Date:c.ledger[0].endDate,s.push(c)}e.setState(Object(f.a)({},e.state,{daily:a,weekly:n,monthly:r,nonRepeating:s}))})}},{key:"loadExpenseTemplates",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("expenseTemplate");case 2:t=e.sent,this.setState(Object(f.a)({},this.state,{expenseTemplates:t}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingBottom:"50px"}},r.a.createElement(U,{title:"moneytoring",buttons:[]}),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(Ie,null)),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(Be,{items:this.state.nonRepeating}),r.a.createElement(Be,{items:this.state.daily}),r.a.createElement(Be,{items:this.state.weekly}),r.a.createElement(Be,{items:this.state.monthly})),this.state.showMenu?r.a.createElement(r.a.Fragment,null,this.state.expenseTemplates.map(function(t,a){return r.a.createElement(Pe,{key:a,keyIndex:Number(a),data:t,classes:e.props.classes,templateClicked:e.newExpense.bind(e,t.expenseTemplateId)})}),r.a.createElement(N.D,{component:"p",className:this.props.classes.fabExpenseLabel},"new expense"),r.a.createElement(N.m,{onClick:this.newExpense.bind(this,null),color:"secondary",size:"small","aria-label":"expense",className:this.props.classes.fabExpense},r.a.createElement(P.a,null)),r.a.createElement(N.b,{onClick:this.toggleMenu,open:!0,className:this.props.classes.backdrop})):null,r.a.createElement(N.m,{onClick:this.toggleMenu,color:"primary","aria-label":"Add",className:this.props.classes.fabPrimary},this.state.showMenu?r.a.createElement(Z.a,null):r.a.createElement(Q.a,null)))}}]),t}(n.Component),Be=function(e){return r.a.createElement(r.a.Fragment,null,e.items.length>0?r.a.createElement(r.a.Fragment,null,e.items.map(function(e,t){return r.a.createElement(Me,{key:t,budget:e})})):null)},Pe=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.D,{component:"p",style:{bottom:"".concat(55*(e.keyIndex+1)+90,"px")},className:e.classes.fabTemplateLabel},e.data.templateName),r.a.createElement(N.m,{onClick:e.templateClicked,style:{bottom:"".concat(50*(e.keyIndex+1)+90,"px")},color:"default",size:"small","aria-label":"expense",className:e.classes.fabTemplate},r.a.createElement(V.a,null)))},Te=Object(b.withStyles)({fabPrimary:{position:"fixed",bottom:15,right:15,zIndex:2},fabExpense:{position:"fixed",bottom:90,right:23,zIndex:2},fabExpenseLabel:{position:"fixed",zIndex:2,bottom:98,color:"white",backgroundColor:"black",right:70,padding:"3px 10px",borderRadius:5},fabTemplate:{position:"fixed",right:23,zIndex:2},fabTemplateLabel:{position:"fixed",zIndex:2,color:"white",backgroundColor:"black",right:70,padding:"3px 10px",borderRadius:5},backdrop:{zIndex:1},divider:{marginBottom:20}})(Ae),Fe=(a(393),a(32)),qe={menuProps:{PaperProps:{style:{maxHeight:224,width:250}}}},Ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).changeViewType=function(e){a.setState(Object(f.a)({},a.state,{viewType:e.target.value}))},a.changeStateValue=function(e,t,n){a.setState(Object(f.a)({},a.state,Object(Fe.a)({},e,Object(f.a)({},a.state[e],Object(Fe.a)({},t,n.target.value)))))},a.handleApply=function(){var e=new Date,t=new Date,n={daily:!1,weekly:!1,monthly:!1,yearly:!1,from:!1,to:!1,selectedAccounts:!1,selectedCategories:!1},r=!1;switch(a.state.viewType){case"daily":""===a.state.daily.date?(r=!0,n.daily=!0):(e=ee()(a.state.daily.date).hours(0).minutes(0).seconds(0),t=ee()(a.state.daily.date).hours(23).minutes(59).seconds(59));break;case"weekly":if(""===a.state.weekly.week)r=!0,n.weekly=!0;else{var s=a.state.weekly.week.split("-"),o=Number(s[1].replace("W",""));e=ee()().year(Number(s[0])).week(o).startOf("week"),t=ee()().year(Number(s[0])).week(o).endOf("week")}break;case"monthly":if(""===a.state.monthly.month)r=!0,n.monthly=!0;else{var c=a.state.monthly.month.split("-");e=ee()().year(Number(c[0])).month(Number(c[1])-1).startOf("month"),t=ee()().year(Number(c[0])).month(Number(c[1])-1).endOf("month")}break;case"yearly":if(""===a.state.yearly.year||isNaN(a.state.yearly.year))r=!0,n.yearly=!0;else{var l=Number(a.state.yearly.year);e=ee()().year(l).startOf("year"),t=ee()().year(l).endOf("year")}break;default:""===a.state.custom.from?(r=!0,n.from=!0):""===a.state.custom.to?(r=!0,n.to=!0):(e=ee()(a.state.custom.from).hours(0).minutes(0).seconds(0),t=ee()(a.state.custom.to).hours(23).minutes(59).seconds(59))}0===a.state.selectedAccounts.length&&(n.selectedAccounts=!0,r=!0),0===a.state.selectedCategories.length&&(n.selectedCategories=!0,r=!0),r?a.setState(Object(f.a)({},a.state,{errors:n})):a.props.applyFilter(e,t,a.state.viewType,a.state.selectedAccounts,a.state.selectedCategories)},a.state={viewType:"daily",daily:{date:ee()().format("YYYY-MM-DD")},weekly:{week:""},monthly:{month:""},yearly:{year:""},custom:{from:"",to:""},accounts:[],selectedAccounts:[],categories:[],selectedCategories:[],errors:{daily:!1,weekly:!1,monthly:!1,yearly:!1,from:!1,to:!1,selectedAccounts:!1,selectedCategories:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("account");case 2:return t=e.sent,e.next=5,fe("category");case 5:a=e.sent,t.unshift({accountId:0,name:"All"}),a.unshift({categoryId:0,name:"All"}),this.setState(Object(f.a)({},this.state,{accounts:t,categories:a})),null!==(n=localStorage.getItem("expensefilter"))&&void 0!==n&&void 0!==(n=JSON.parse(n)).selectedAccounts&&void 0!==n.selectedCategories&&(0===n.selectedAccounts[0].accountId?this.setState(Object(f.a)({},this.state,{selectedAccounts:t})):this.setState(Object(f.a)({},this.state,{selectedAccounts:n.selectedAccounts.map(function(e){return t.find(function(t){return t.accountId===e.accountId})})})),0===n.selectedCategories[0].categoryId?this.setState(Object(f.a)({},this.state,{selectedCategories:a})):this.setState(Object(f.a)({},this.state,{selectedCategories:n.selectedCategories.map(function(e){return a.find(function(t){return t.categoryId===e.categoryId})})})));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;if("selectedAccounts"===e){var n=a.find(function(e){return 0===e.accountId}),r=this.state.selectedAccounts.find(function(e){return 0===e.accountId});null!==n&&void 0!==n&&null!==r&&void 0!==r?a.shift():null!==n&&void 0!==n&&(a=this.state.accounts)}else if("selectedCategories"===e){var s=a.find(function(e){return 0===e.categoryId}),o=this.state.selectedCategories.find(function(e){return 0===e.categoryId});null!==s&&void 0!==s&&null!==o&&void 0!==o?a.shift():null!==s&&void 0!==s&&(a=this.state.categories)}this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.k,null,"Filter expense"),r.a.createElement(N.i,null,r.a.createElement(N.n,{className:"form-control",margin:"normal"},r.a.createElement(N.r,null,"Accounts"),r.a.createElement(N.z,{error:this.state.errors.selectedAccounts,multiple:!0,value:this.state.selectedAccounts,onChange:this.handleChangeProperty.bind(this,"selectedAccounts"),input:r.a.createElement(N.q,{id:"select-multiple-checkbox1"}),renderValue:function(e){return e.map(function(e){return e.name}).join(",")},MenuProps:qe.menuProps},this.state.accounts.map(function(t,a){return r.a.createElement(N.y,{key:a,value:t},r.a.createElement(N.f,{checked:e.state.selectedAccounts.map(function(e){return e.accountId}).indexOf(t.accountId)>-1}),r.a.createElement(N.x,{primary:t.name}))}))),r.a.createElement(N.n,{className:"form-control",margin:"normal"},r.a.createElement(N.r,null,"Categories"),r.a.createElement(N.z,{error:this.state.errors.selectedCategories,multiple:!0,value:this.state.selectedCategories,onChange:this.handleChangeProperty.bind(this,"selectedCategories"),input:r.a.createElement(N.q,{id:"select-multiple-checkbox2"}),renderValue:function(e){return e.map(function(e){return e.name}).join(",")},MenuProps:qe.menuProps},this.state.categories.map(function(t,a){return r.a.createElement(N.y,{key:a,value:t},r.a.createElement(N.f,{checked:e.state.selectedCategories.map(function(e){return e.categoryId}).indexOf(t.categoryId)>-1}),r.a.createElement(N.x,{primary:t.name}))}))),r.a.createElement(N.n,{className:"form-control",margin:"normal"},r.a.createElement(N.r,null,"View"),r.a.createElement(N.z,{value:this.state.viewType,onChange:this.changeViewType.bind(this)},r.a.createElement(N.y,{value:"daily"},r.a.createElement("em",null,"Daily")),r.a.createElement(N.y,{value:"weekly"},r.a.createElement("em",null,"Weekly")),r.a.createElement(N.y,{value:"monthly"},r.a.createElement("em",null,"Monthly")),r.a.createElement(N.y,{value:"yearly"},r.a.createElement("em",null,"Yearly")),r.a.createElement(N.y,{value:"custom"},r.a.createElement("em",null,"Custom")))),"daily"===this.state.viewType?r.a.createElement(N.B,{error:this.state.errors.daily,ref:"title",label:"Date",value:this.state.daily.date,onChange:this.changeStateValue.bind(this,"daily","date"),margin:"normal",type:"date",className:"form-control"}):null,"weekly"===this.state.viewType?r.a.createElement(N.B,{error:this.state.errors.weekly,ref:"title",label:"Week",value:this.state.weekly.week,onChange:this.changeStateValue.bind(this,"weekly","week"),margin:"normal",type:"week",className:"form-control"}):null,"monthly"===this.state.viewType?r.a.createElement(N.B,{error:this.state.errors.monthly,ref:"title",label:"Month",value:this.state.monthly.month,onChange:this.changeStateValue.bind(this,"monthly","month"),margin:"normal",type:"month",className:"form-control"}):null,"yearly"===this.state.viewType?r.a.createElement(N.B,{error:this.state.errors.yearly,ref:"title",label:"Year",value:this.state.yearly.year,onChange:this.changeStateValue.bind(this,"yearly","year"),margin:"normal",className:"form-control",type:"number"}):null,"custom"===this.state.viewType?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.B,{error:this.state.errors.from,ref:"title",label:"From",value:this.state.custom.from,onChange:this.changeStateValue.bind(this,"custom","from"),margin:"normal",type:"date",className:"form-control"}),r.a.createElement(N.B,{error:this.state.errors.to,ref:"title",label:"To",value:this.state.custom.to,onChange:this.changeStateValue.bind(this,"custom","to"),margin:"normal",type:"date",className:"form-control"})):null),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:this.props.close,color:"secondary"},"Cancel"),r.a.createElement(N.c,{onClick:this.handleApply.bind(this),color:"primary"},"Apply")))}}]),t}(n.Component),Re=Object(b.withStyles)(qe)(Ye),Ve=a(166),ze=a.n(Ve),He=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggleFilter=function(){a.setState(Object(f.a)({},a.state,{showFilter:!a.state.showFilter}))},a.loadExpenses=function(e,t,n,r,s){var o={from:e,to:t,viewType:n,selectedAccounts:r,selectedCategories:s};r=r.map(function(e){return e.accountId}),s=s.map(function(e){return e.categoryId}),localStorage.setItem("expensefilter",JSON.stringify(o)),e.month()===t.month()&&e.date()===t.date()&&e.year()===t.year()?a.setState(Object(f.a)({},a.state,{expenses:[],currentFilter:e.format("MMM DD"),total:0,filter:o})):a.setState(Object(f.a)({},a.state,{expenses:[],currentFilter:e.format("MMM DD")+" - "+t.format("MMM DD"),total:0,filter:o}));var c=null;e&&t&&(c=IDBKeyRange.bound(e.toDate(),t.toDate())),indexedDB.open("Moneytoring").onsuccess=function(e){var t=e.target.result.transaction(["expense"],"readonly"),n=t.objectStore("expense"),o=null===c?n.index("date").openCursor(null,"prev"):n.index("date").openCursor(c,"prev");a.setState(Object(f.a)({},a.state,{showFilter:!1}));var l=[],i=0;o.onsuccess=function(e){var t=e.target.result;t&&(-1===r.indexOf(0)&&-1===r.indexOf(t.value.accountId)||-1===s.indexOf(0)&&-1===s.indexOf(t.value.categoryId)||(l.push(t.value),i+=t.value.amount),t.continue())},t.oncomplete=function(){a.renderShits(l,i)}}},a.renderShits=function(e,t){a.setState(Object(f.a)({},a.state,{expenses:e,total:t}))},a.navigate=function(e){var t,n,r="days";r="weekly"===a.state.filter.viewType?"weeks":r,r="monthly"===a.state.filter.viewType?"months":r,r="yearly"===a.state.filter.viewType?"years":r,"prev"===e?(t=a.state.filter.from.subtract(1,r),n=a.state.filter.to.subtract(1,r)):(t=a.state.filter.from.add(1,r),n=a.state.filter.to.add(1,r)),"months"===r&&n.endOf("month"),a.setState(Object(f.a)({},a.state,{filter:Object(f.a)({},a.state.filter,{from:t,to:n})})),a.loadExpenses(t,n,a.state.filter.viewType,a.state.filter.selectedAccounts,a.state.filter.selectedCategories)};var n=localStorage.getItem("expensefilter");return null!==n?((n=JSON.parse(n)).from=ee()(n.from),n.to=ee()(n.to)):n={viewType:"daily",from:ee()().hours(0).minutes(0).seconds(0),to:ee()().hours(23).minutes(59).seconds(59)},void 0===n.selectedAccounts&&(n.selectedAccounts=[{accountId:0,name:"All"}],n.selectedCategories=[{categoryId:0,name:"All"}]),a.state={currentFilter:"",total:0,expenses:[],showFilter:!1,filter:n},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadExpenses(this.state.filter.from,this.state.filter.to,this.state.filter.viewType,this.state.filter.selectedAccounts,this.state.filter.selectedCategories)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(U,{title:"Expense",buttons:[r.a.createElement(N.p,{onClick:this.toggleFilter,color:"inherit","aria-label":"Menu"},r.a.createElement(ze.a,null))]}),r.a.createElement(N.a,{className:this.props.classes.appBar,color:"default"},r.a.createElement(N.C,null,"custom"!==this.state.filter.viewType?r.a.createElement(N.p,{onClick:this.navigate.bind(this,"prev")},r.a.createElement(de.a,null)):null,r.a.createElement(N.D,{component:"p",className:this.props.classes.filterLabel},this.state.currentFilter,r.a.createElement("br",null),r.a.createElement("small",null,ge(this.state.total))),"custom"!==this.state.filter.viewType?r.a.createElement(N.p,{onClick:this.navigate.bind(this,"next")},r.a.createElement(pe.a,null)):null)),r.a.createElement("div",{style:{marginTop:"56px",overflowY:"auto",minHeight:"100%"}},r.a.createElement(N.t,{component:"nav"},this.state.expenses.map(function(e){return r.a.createElement(S.a,{key:e.expenseId,style:{textDecoration:"none"},className:"list-item",to:"/expense/edit/"+e.expenseId},r.a.createElement(N.u,{button:!0},r.a.createElement(N.x,{primary:e.title,secondary:ee()(e.date).format("MMM DD hh:mma (ddd)")}),r.a.createElement(N.D,{className:"float-right"},ge(e.amount))),r.a.createElement(N.l,{light:!0}))}))),r.a.createElement(N.g,{onClose:this.toggleFilter,open:this.state.showFilter},r.a.createElement(Re,{close:this.toggleFilter.bind(this),applyFilter:this.loadExpenses.bind(this)})),r.a.createElement(N.m,{onClick:function(){e.props.history.push("/expense/new")},color:"primary","aria-label":"Add",style:{position:"fixed",bottom:"15px",right:"15px"}},r.a.createElement(Q.a,null)))}}]),t}(n.Component),Le=Object(b.withStyles)({appBar:{position:"fixed",marginTop:56,zIndex:1},filterLabel:{flexGrow:1,textAlign:"center"}})(He),We=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Income index"))}}]),t}(n.Component),Ge=a(167),Je=a.n(Ge),Ke={root:{flexGrow:1,paddingTop:56},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}},Ue=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:Ke.root},r.a.createElement(v.a,{position:"fixed"},r.a.createElement(O.a,null,this.props.showBackButton?r.a.createElement(C.a,{onClick:this.props.onBack,style:Ke.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(Je.a,null)):null,r.a.createElement(x.a,{variant:"h6",color:"inherit",style:Ke.grow},this.props.title),this.props.buttons.map(function(e,t){return r.a.createElement("span",{key:t},e)}))))}}]),t}(n.Component),$e=a(41),Qe=a.n($e),Xe=a(20),Ze=a.n(Xe),_e=a(28),et=a.n(_e),tt=a(29),at=a.n(tt),nt=a(30),rt=a.n(nt),st=a(31),ot=a.n(st),ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={title:"",categoryId:0,amount:"",accountId:1,description:"",date:ee()().format("YYYY-MM-DD[T]HH:mm"),accounts:[],categories:[],errors:{title:!1,category:!1,amount:!1,account:!1,date:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fe("account").then(function(t){e.setState(Object(f.a)({},e.state,{accounts:t}))}),fe("category").then(function(t){e.setState(Object(f.a)({},e.state,{categories:t}))}),this.loadTemplate()}},{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;"accountId"!==e&&"categoryId"!==e||(a=parseInt(t.target.value)),this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"formatCurrency",value:function(e){var t=ge(this.state.amount);this.setState(Object(f.a)({},this.state,{amount:t}))}},{key:"loadTemplate",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.match.params.templateId)){e.next=6;break}return e.next=4,ye("expenseTemplate",Number(t));case 4:a=e.sent,this.setState(Object(f.a)({},this.state,a,{amount:a.amount.toString()}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=this,t={title:this.state.title,categoryId:this.state.categoryId,accountId:this.state.accountId,amount:parseFloat(this.state.amount.replace(/,/g,"")),description:this.state.description,date:new Date(this.state.date)},a=!1,n={title:!1,category:!1,amount:!1,account:!1,date:!1};""===t.title&&(n.title=!0,a=!0),(0===t.amount||isNaN(t.amount))&&(n.amount=!0,a=!0),0===t.accountId&&(n.account=!0,a=!0),0===t.categoryId&&(n.category=!0,a=!0),this.state.date&&""!==this.state.date||(n.date=!0,a=!0),a?this.setState(Object(f.a)({},this.state,{errors:n})):Ee("expense",t,function(a){if(a){var n={from:ee()(t.date).hours(0).minutes(0).seconds(0),to:ee()(t.date).hours(0).hours(23).minutes(59).seconds(59),viewType:"daily"};localStorage.setItem("expensefilter",JSON.stringify(n)),e.props.history.push("/expense")}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Add expense",buttons:[r.a.createElement(C.a,{onClick:this.handleSave.bind(this),color:"inherit"},r.a.createElement(Qe.a,null))]}),r.a.createElement("div",{className:"content"},r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Account"),r.a.createElement(rt.a,{error:this.state.errors.account,value:this.state.accountId,onChange:this.handleChangeProperty.bind(this,"accountId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select account")),this.state.accounts.map(function(e){return r.a.createElement(ot.a,{key:e.accountId,value:e.accountId},e.name)}))),r.a.createElement(Ze.a,{error:this.state.errors.title,label:"Title",value:this.state.title,onChange:this.handleChangeProperty.bind(this,"title"),margin:"normal",className:"form-control"}),r.a.createElement(Ze.a,{error:this.state.errors.amount,label:"Amount",value:this.state.amount,onChange:this.handleChangeProperty.bind(this,"amount"),margin:"normal",className:"form-control",onBlur:this.formatCurrency.bind(this)}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Category"),r.a.createElement(rt.a,{error:this.state.errors.category,value:this.state.categoryId,onChange:this.handleChangeProperty.bind(this,"categoryId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select category")),this.state.categories.map(function(e){return r.a.createElement(ot.a,{key:e.categoryId,value:e.categoryId},e.name)}))),r.a.createElement(Ze.a,{error:this.state.errors.date,label:"Date",type:"datetime-local",margin:"normal",className:"form-control",value:this.state.date,onChange:this.handleChangeProperty.bind(this,"date")}),r.a.createElement(Ze.a,{className:"form-control",label:"Notes",multiline:!0,rows:"6",value:this.state.description,onChange:this.handleChangeProperty.bind(this,"description"),margin:"normal"})))}}]),t}(n.Component),lt=a(43),it=a.n(lt),ut=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).loadExpense=function(e,t){indexedDB.open("Moneytoring").onsuccess=function(n){var r=n.target.result.transaction(["expense"],"readonly"),s=r.objectStore("expense").get(e);r.oncomplete=function(e){s.result?t.setState(Object(f.a)({},t.state,{title:s.result.title,categoryId:s.result.categoryId,amount:ge(s.result.amount),accountId:s.result.accountId,description:s.result.description,date:ee()(s.result.date).format("YYYY-MM-DD[T]HH:mm")})):a.props.history.push("/expense")}}},a.handleDelete=function(){indexedDB.open("Moneytoring").onsuccess=function(e){var t=e.target.result.transaction("expense","readwrite");t.objectStore("expense").delete(a.state.expenseId),t.oncomplete=function(e){a.props.history.push("/expense")}}},a.toggleDeleteModal=function(){a.setState(Object(f.a)({},a.state,{showDelete:!a.state.showDelete}))},a.state={showDelete:!1,expenseId:Number(a.props.match.params.id),title:"",categoryId:0,amount:"",accountId:0,date:ee()().format("YYYY-MM-DD[T]HH:mm"),description:"",accounts:[],categories:[],errors:{title:!1,category:!1,amount:!1,account:!1,date:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fe("account").then(function(t){e.setState(Object(f.a)({},e.state,{accounts:t}))}),fe("category").then(function(t){e.setState(Object(f.a)({},e.state,{categories:t}))}),this.loadExpense(this.state.expenseId,this)}},{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;"accountId"!==e&&"categoryId"!==e||(a=parseInt(t.target.value)),this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"formatCurrency",value:function(e){var t=ge(this.state.amount);this.setState(Object(f.a)({},this.state,{amount:t}))}},{key:"handleSave",value:function(){var e=this,t={expenseId:this.state.expenseId,title:this.state.title,categoryId:this.state.categoryId,accountId:this.state.accountId,amount:parseFloat(this.state.amount.replace(/,/g,"")),description:this.state.description,date:new Date(this.state.date)},a=!1,n={title:!1,category:!1,amount:!1,account:!1,date:!1};""===t.title&&(n.title=!0,a=!0),(0===t.amount||isNaN(t.amount))&&(n.amount=!0,a=!0),0===t.accountId&&(n.account=!0,a=!0),0===t.categoryId&&(n.category=!0,a=!0),this.state.date&&""!==this.state.date||(n.date=!0,a=!0),a?this.setState(Object(f.a)({},this.state,{errors:n})):we("expense",t,function(a){if(a){var n={from:ee()(t.date).hours(0).minutes(0).seconds(0),to:ee()(t.date).hours(0).hours(23).minutes(59).seconds(59),viewType:"daily"};localStorage.setItem("expensefilter",JSON.stringify(n)),e.props.history.push("/expense")}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Add expense",buttons:[r.a.createElement(C.a,{onClick:this.toggleDeleteModal.bind(this),color:"inherit"},r.a.createElement(it.a,null)),r.a.createElement(C.a,{onClick:this.handleSave.bind(this),color:"inherit"},r.a.createElement(Qe.a,null))]}),r.a.createElement("div",{className:"content"},r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Account"),r.a.createElement(rt.a,{error:this.state.errors.account,value:this.state.accountId,onChange:this.handleChangeProperty.bind(this,"accountId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select account")),this.state.accounts.map(function(e){return r.a.createElement(ot.a,{key:e.accountId,value:e.accountId},e.name)}))),r.a.createElement(Ze.a,{error:this.state.errors.title,label:"Title",value:this.state.title,onChange:this.handleChangeProperty.bind(this,"title"),margin:"normal",className:"form-control"}),r.a.createElement(Ze.a,{error:this.state.errors.amount,label:"Amount",value:this.state.amount,onChange:this.handleChangeProperty.bind(this,"amount"),margin:"normal",className:"form-control",onBlur:this.formatCurrency.bind(this)}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Category"),r.a.createElement(rt.a,{error:this.state.errors.category,value:this.state.categoryId,onChange:this.handleChangeProperty.bind(this,"categoryId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select category")),this.state.categories.map(function(e){return r.a.createElement(ot.a,{key:e.categoryId,value:e.categoryId},e.name)}))),r.a.createElement(Ze.a,{error:this.state.errors.date,label:"Date",type:"datetime-local",margin:"normal",className:"form-control",value:this.state.date,onChange:this.handleChangeProperty.bind(this,"date")}),r.a.createElement(Ze.a,{className:"form-control",label:"Notes",multiline:!0,rows:"6",value:this.state.description,onChange:this.handleChangeProperty.bind(this,"description"),margin:"normal"}),r.a.createElement(N.g,{onClose:this.toggleDeleteModal,open:this.state.showDelete},r.a.createElement(N.k,null,"Confirm"),r.a.createElement(N.i,null,r.a.createElement(N.j,null,"Are you sure you want to delete?")),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:this.toggleDeleteModal,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(N.c,{onClick:this.handleDelete,color:"secondary"},"Delete")))))}}]),t}(n.Component),mt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){fe("budget").then(function(e){for(var t=[],n=[],r=[],s=[],o=0;o<e.length;o++){var c=e[o];if(c.repeat){var l=Se(c);null!=l&&(c.ledger=[l],c.repeat===xe.daily?t.push(c):c.repeat===xe.weekly?n.push(c):c.repeat===xe.monthly&&r.push(c))}else c.ledger[0].endDate=c.noEndDate?new Date:c.ledger[0].endDate,s.push(c)}a.setState(Object(f.a)({},a.state,{daily:Object(f.a)({},a.state.daily,{items:t}),weekly:Object(f.a)({},a.state.weekly,{items:n}),monthly:Object(f.a)({},a.state.monthly,{items:r}),nonRepeating:Object(f.a)({},a.state.nonRepeating,{items:s})}))})},a.changeDisplay=function(e){a.setState(Object(f.a)({},a.state,{display:e.target.value}))},a.state={nonRepeating:{items:[]},weekly:{start:ee()().startOf("week"),end:ee()().endOf("week"),items:[]},monthly:{start:ee()().startOf("month"),end:ee()().endOf("month"),items:[]},daily:{start:ee()().startOf("day"),end:ee()().endOf("day"),items:[]},display:"all"},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{title:"Budget",buttons:[r.a.createElement(N.z,{className:this.props.classes.filter,value:"all",onChange:this.changeDisplay.bind(this)},r.a.createElement(N.y,{value:"all"},"All"),r.a.createElement(N.y,{value:"daily"},"Daily"),r.a.createElement(N.y,{value:"weekly"},"Weekly"),r.a.createElement(N.y,{value:"monthly"},"Monthly"))]}),"all"===this.state.display?this.state.nonRepeating.items.map(function(e,t){return r.a.createElement("div",{key:t,className:"content"},r.a.createElement(S.a,{style:{textDecoration:"none"},to:"/budget/edit/".concat(e.budgetId)},r.a.createElement(Me,{budget:e})))}):null,"all"===this.state.display||"daily"===this.state.display?r.a.createElement(dt,{items:this.state.daily.items,label:"Daily",classes:this.props.classes}):null,"all"===this.state.display||"weekly"===this.state.display?r.a.createElement(dt,{items:this.state.weekly.items,label:"Weekly",classes:this.props.classes}):null,"all"===this.state.display||"monthly"===this.state.display?r.a.createElement(dt,{items:this.state.monthly.items,label:"Monthly",classes:this.props.classes}):null,r.a.createElement(N.m,{onClick:function(){e.props.history.push("budget/new")},color:"primary",className:this.props.classes.fab},r.a.createElement(Q.a,null)))}}]),t}(n.Component),dt=function(e){return r.a.createElement(r.a.Fragment,null,e.items.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.l,{className:e.classes.divider}),r.a.createElement(N.D,{variant:"button",align:"center"},e.label),e.items.map(function(e,t){return r.a.createElement("div",{key:t,className:"content"},r.a.createElement(S.a,{style:{textDecoration:"none"},to:"/budget/edit/".concat(e.budgetId)},r.a.createElement(Me,{budget:e})))})):null)},ht=Object(b.withStyles)({fab:{position:"fixed",bottom:15,right:15},filter:{color:"#fff",borderColor:"#fff"},divider:{marginBottom:20}})(mt),pt={myClass:{font:20,textAlign:"center",width:"100%"},menuProps:{PaperProps:{style:{maxHeight:224,width:250}}}},gt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){fe("account").then(function(e){e.unshift({accountId:0,name:"All"}),a.setState(Object(f.a)({},a.state,{accounts:e})),fe("category").then(function(t){t.unshift({categoryId:0,name:"All"}),a.setState(Object(f.a)({},a.state,{categories:t})),be("budget",a.state.budgetId).then(function(n){a.setState(Object(f.a)({},a.state,{name:n.name,selectedAccounts:n.accountIds.map(function(t){return e.find(function(e){return e.accountId===t})}),isActive:n.isActive,repeat:n.repeat,startDate:ee()(n.startDate).format("YYYY-MM-DD"),endDate:null===n.endDate?"":ee()(n.endDate).format("YYYY-MM-DD"),amount:ge(n.amount),selectedCategories:n.categoryIds.map(function(e){return t.find(function(t){return t.categoryId===e})}),noEndDate:n.noEndDate,ledger:n.ledger,showInDashboard:n.showInDashboard}))})})})},a.handleSave=function(){var e={budgetId:a.state.budgetId,name:a.state.name,accountIds:a.state.selectedAccounts.map(function(e){return e.accountId}),categoryIds:a.state.selectedCategories.map(function(e){return e.categoryId}),amount:parseFloat(a.state.amount.replace(/,/g,"")),repeat:a.state.repeat,startDate:new Date(a.state.startDate),noEndDate:a.state.noEndDate,endDate:a.state.endDate,isActive:!0,ledger:a.state.ledger,showInDashboard:a.state.showInDashboard},t=!1,n={name:!1,selectedAccounts:!1,repeat:!1,startDate:!1,endDate:!1,amount:!1,selectedCategories:!1};""===e.name&&(t=!0,n.name=!0),null!==e.accountIds&&void 0!==e.accountIds&&0!==e.accountIds.length||(t=!0,n.selectedAccounts=!0),null!==e.categoryIds&&void 0!==e.categoryIds&&0!==e.categoryIds.length||(t=!0,n.selectedCategories=!0),(0===e.amount||isNaN(e.amount))&&(n.amount=!0,t=!0),a.state.startDate&&""!==a.state.startDate||(t=!0,n.startDate=!0),e.noEndDate||a.state.endDate&&""!==a.state.endDate||(t=!0,n.endDate=!0),t?a.setState(Object(f.a)({},a.state,{errors:n})):(e.endDate=e.noEndDate?null:new Date(e.endDate),e.repeat||e.ledger.push({startDate:ee()(e.startDate).startOf("day").toDate(),endDate:ee()(e.endDate).endOf("day").toDate(),spent:0,amount:e.amount}),we("budget",e,function(e){e&&a.props.history.push("/budget")}))},a.handleDelete=function(){ke("budget",a.state.budgetId).then(function(){a.props.history.push("/budget")})},a.toggleDeleteModal=function(){a.setState(Object(f.a)({},a.state,{showDelete:!a.state.showDelete}))},a.state={budgetId:Number(a.props.match.params.id),name:"",selectedAccounts:[{name:"All",accountId:0}],isActive:!0,repeat:xe.none,startDate:"",endDate:"",amount:"0",selectedCategories:[],accounts:[],categories:[],showInDashboard:!1,noEndDate:!1,errors:{name:!1,selectedAccounts:!1,repeat:!1,startDate:!1,endDate:!1,amount:!1,selectedCategories:!1},showDelete:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;if("selectedAccounts"===e){var n=a.find(function(e){return 0===e.accountId}),r=this.state.selectedAccounts.find(function(e){return 0===e.accountId});null!==n&&void 0!==n&&null!==r&&void 0!==r?a.shift():null!==n&&void 0!==n&&(a=this.state.accounts)}else if("selectedCategories"===e){var s=a.find(function(e){return 0===e.categoryId}),o=this.state.selectedCategories.find(function(e){return 0===e.categoryId});null!==s&&void 0!==s&&null!==o&&void 0!==o?a.shift():null!==s&&void 0!==s&&(a=this.state.categories)}else"noEndDate"!==e&&"showInDashboard"!==e||(a="true"===a)&&this.setState(Object(f.a)({},this.state,{endDate:""}));this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"formatCurrency",value:function(e){var t=ge(this.state.amount);this.setState(Object(f.a)({},this.state,{amount:t}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Add budget",buttons:[r.a.createElement(C.a,{onClick:this.toggleDeleteModal.bind(this),color:"inherit"},r.a.createElement(it.a,null)),r.a.createElement(C.a,{onClick:this.handleSave.bind(this),color:"inherit"},r.a.createElement(Qe.a,null))]}),r.a.createElement("div",{className:"content"},r.a.createElement(Ze.a,{error:this.state.errors.name,label:"Name",value:this.state.name,onChange:this.handleChangeProperty.bind(this,"name"),margin:"normal",className:"form-control"}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Accounts"),r.a.createElement(rt.a,{error:this.state.errors.selectedAccounts,multiple:!0,value:this.state.selectedAccounts,onChange:this.handleChangeProperty.bind(this,"selectedAccounts"),input:r.a.createElement(N.q,{id:"select-multiple-checkbox"}),renderValue:function(e){return e.map(function(e){return e.name}).join(",")},MenuProps:pt.menuProps},this.state.accounts.map(function(t,a){return r.a.createElement(N.y,{key:a,value:t},r.a.createElement(N.f,{checked:e.state.selectedAccounts.map(function(e){return e.accountId}).indexOf(t.accountId)>-1}),r.a.createElement(N.x,{primary:t.name}))}))),r.a.createElement(Ze.a,{error:this.state.errors.amount,label:"Amount",value:this.state.amount,onChange:this.handleChangeProperty.bind(this,"amount"),margin:"normal",className:"form-control",onBlur:this.formatCurrency.bind(this)}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Category"),r.a.createElement(rt.a,{error:this.state.errors.selectedCategories,multiple:!0,value:this.state.selectedCategories,onChange:this.handleChangeProperty.bind(this,"selectedCategories"),input:r.a.createElement(N.q,{id:"select-multiple-checkbox"}),renderValue:function(e){return e.map(function(e){return e.name}).join(",")},MenuProps:pt.menuProps},this.state.categories.map(function(t,a){return r.a.createElement(N.y,{key:a,value:t},r.a.createElement(N.f,{checked:e.state.selectedCategories.map(function(e){return e.categoryId}).indexOf(t.categoryId)>-1}),r.a.createElement(N.x,{primary:t.name}))}))),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Repeat"),r.a.createElement(rt.a,{error:this.state.errors.repeat,value:this.state.repeat,onChange:this.handleChangeProperty.bind(this,"repeat")},r.a.createElement(N.y,{value:xe.none},"None"),r.a.createElement(N.y,{value:xe.daily},"Daily"),r.a.createElement(N.y,{value:xe.weekly},"Weekly"),r.a.createElement(N.y,{value:xe.monthly},"Monthly"),r.a.createElement(N.y,{value:xe.custom},"Custom"))),r.a.createElement(Ze.a,{error:this.state.errors.startDate,label:"Start date",type:"date",margin:"normal",className:"form-control",value:this.state.startDate,onChange:this.handleChangeProperty.bind(this,"startDate")}),r.a.createElement(Ze.a,{error:this.state.errors.endDate,label:"End date",type:"date",margin:"normal",className:"form-control",disabled:this.state.noEndDate,value:this.state.endDate,onChange:this.handleChangeProperty.bind(this,"endDate")}),r.a.createElement(N.o,{control:r.a.createElement(N.A,{checked:this.state.noEndDate,onChange:this.handleChangeProperty.bind(this,"noEndDate"),value:!this.state.noEndDate,color:"primary"}),label:"no end date"}),r.a.createElement(N.o,{control:r.a.createElement(N.A,{checked:this.state.showInDashboard,onChange:this.handleChangeProperty.bind(this,"showInDashboard"),value:!this.state.showInDashboard,color:"primary"}),label:"show widget on dashboard"})),r.a.createElement(N.g,{onClose:this.toggleDeleteModal,open:this.state.showDelete},r.a.createElement(N.k,null,"Confirm"),r.a.createElement(N.i,null,r.a.createElement(N.j,null,"Are you sure you want to delete?")),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:this.toggleDeleteModal,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(N.c,{onClick:this.handleDelete,color:"secondary"},"Delete"))))}}]),t}(n.Component),yt=Object(b.withStyles)(pt)(gt),ft={myClass:{font:20,textAlign:"center",width:"100%"},menuProps:{PaperProps:{style:{maxHeight:224,width:250}}}},bt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSave=function(){var e={name:a.state.name,accountIds:a.state.selectedAccounts.map(function(e){return e.accountId}),categoryIds:a.state.selectedCategories.map(function(e){return e.categoryId}),amount:parseFloat(a.state.amount.replace(/,/g,"")),repeat:a.state.repeat,startDate:new Date(a.state.startDate),noEndDate:a.state.noEndDate,endDate:a.state.endDate,isActive:!0,showInDashboard:a.state.showInDashboard,ledger:[]},t=!1,n={name:!1,selectedAccounts:!1,repeat:!1,startDate:!1,endDate:!1,amount:!1,selectedCategories:!1};""===e.name&&(t=!0,n.name=!0),null!==e.accountIds&&void 0!==e.accountIds&&0!==e.accountIds.length||(t=!0,n.selectedAccounts=!0),null!==e.categoryIds&&void 0!==e.categoryIds&&0!==e.categoryIds.length||(t=!0,n.selectedCategories=!0),(0===e.amount||isNaN(e.amount))&&(n.amount=!0,t=!0),a.state.startDate&&""!==a.state.startDate||(t=!0,n.startDate=!0),e.noEndDate||a.state.endDate&&""!==a.state.endDate||(t=!0,n.endDate=!0),t?a.setState(Object(f.a)({},a.state,{errors:n})):(e.endDate=e.noEndDate?null:new Date(e.endDate),e.repeat||e.ledger.push({startDate:ee()(e.startDate).startOf("day").toDate(),endDate:ee()(e.endDate).endOf("day").toDate(),spent:0,amount:e.amount}),Ee("budget",e,function(e){e&&a.props.history.push("/budget")}))},a.componentDidMount=function(){fe("account").then(function(e){e.unshift({accountId:0,name:"All"}),a.setState(Object(f.a)({},a.state,{accounts:e}))}),fe("category").then(function(e){e.unshift({categoryId:0,name:"All"}),a.setState(Object(f.a)({},a.state,{categories:e}))})},a.state={name:"",selectedAccounts:[{name:"All",accountId:0}],isActive:!0,repeat:xe.none,startDate:"",endDate:"",amount:"0",showInDashboard:!1,selectedCategories:[],accounts:[],categories:[],noEndDate:!1,errors:{name:!1,selectedAccounts:!1,repeat:!1,startDate:!1,endDate:!1,amount:!1,selectedCategories:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;if("selectedAccounts"===e){var n=a.find(function(e){return 0===e.accountId}),r=this.state.selectedAccounts.find(function(e){return 0===e.accountId});null!==n&&void 0!==n&&null!==r&&void 0!==r?a.shift():null!==n&&void 0!==n&&(a=this.state.accounts)}else if("selectedCategories"===e){var s=a.find(function(e){return 0===e.categoryId}),o=this.state.selectedCategories.find(function(e){return 0===e.categoryId});null!==s&&void 0!==s&&null!==o&&void 0!==o?a.shift():null!==s&&void 0!==s&&(a=this.state.categories)}else"noEndDate"!==e&&"showInDashboard"!==e||(a="true"===a)&&this.setState(Object(f.a)({},this.state,{endDate:""}));this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"formatCurrency",value:function(e){var t=ge(this.state.amount);this.setState(Object(f.a)({},this.state,{amount:t}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Add budget",buttons:[r.a.createElement(C.a,{onClick:this.handleSave.bind(this),color:"inherit"},r.a.createElement(Qe.a,null))]}),r.a.createElement("div",{className:"content"},r.a.createElement(Ze.a,{error:this.state.errors.name,label:"Name",value:this.state.name,onChange:this.handleChangeProperty.bind(this,"name"),margin:"normal",className:"form-control"}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Accounts"),r.a.createElement(rt.a,{error:this.state.errors.selectedAccounts,multiple:!0,value:this.state.selectedAccounts,onChange:this.handleChangeProperty.bind(this,"selectedAccounts"),input:r.a.createElement(N.q,{id:"select-multiple-checkbox"}),renderValue:function(e){return e.map(function(e){return e.name}).join(",")},MenuProps:ft.menuProps},this.state.accounts.map(function(t,a){return r.a.createElement(N.y,{key:a,value:t},r.a.createElement(N.f,{checked:e.state.selectedAccounts.map(function(e){return e.accountId}).indexOf(t.accountId)>-1}),r.a.createElement(N.x,{primary:t.name}))}))),r.a.createElement(Ze.a,{error:this.state.errors.amount,label:"Amount",value:this.state.amount,onChange:this.handleChangeProperty.bind(this,"amount"),margin:"normal",className:"form-control",onBlur:this.formatCurrency.bind(this)}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Category"),r.a.createElement(rt.a,{error:this.state.errors.selectedCategories,multiple:!0,value:this.state.selectedCategories,onChange:this.handleChangeProperty.bind(this,"selectedCategories"),input:r.a.createElement(N.q,{id:"select-multiple-checkbox"}),renderValue:function(e){return e.map(function(e){return e.name}).join(",")},MenuProps:ft.menuProps},this.state.categories.map(function(t,a){return r.a.createElement(N.y,{key:a,value:t},r.a.createElement(N.f,{checked:e.state.selectedCategories.map(function(e){return e.categoryId}).indexOf(t.categoryId)>-1}),r.a.createElement(N.x,{primary:t.name}))}))),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Repeat"),r.a.createElement(rt.a,{error:this.state.errors.repeat,value:this.state.repeat,onChange:this.handleChangeProperty.bind(this,"repeat")},r.a.createElement(N.y,{value:xe.none},"None"),r.a.createElement(N.y,{value:xe.daily},"Daily"),r.a.createElement(N.y,{value:xe.weekly},"Weekly"),r.a.createElement(N.y,{value:xe.monthly},"Monthly"),r.a.createElement(N.y,{value:xe.custom},"Custom"))),r.a.createElement(Ze.a,{error:this.state.errors.startDate,label:"Start date",type:"date",margin:"normal",className:"form-control",value:this.state.startDate,onChange:this.handleChangeProperty.bind(this,"startDate")}),r.a.createElement(Ze.a,{error:this.state.errors.endDate,label:"End date",type:"date",margin:"normal",className:"form-control",disabled:this.state.noEndDate,value:this.state.endDate,onChange:this.handleChangeProperty.bind(this,"endDate")}),r.a.createElement(N.o,{control:r.a.createElement(N.A,{checked:this.state.noEndDate,onChange:this.handleChangeProperty.bind(this,"noEndDate"),value:!this.state.noEndDate,color:"primary"}),label:"no end date"}),r.a.createElement(N.o,{control:r.a.createElement(N.A,{checked:this.state.showInDashboard,onChange:this.handleChangeProperty.bind(this,"showInDashboard"),value:!this.state.showInDashboard,color:"primary"}),label:"show widget on dashboard"})))}}]),t}(n.Component),Et=Object(b.withStyles)(ft)(bt),vt=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{title:"Settings",buttons:[]}),r.a.createElement(N.t,null,r.a.createElement(S.a,{className:this.props.classes.link,to:"/accounts"},r.a.createElement(N.u,null,r.a.createElement(N.x,{primary:"Accounts",secondary:"Create new accounts, edit existing ones, or delete an account."}))),r.a.createElement(S.a,{className:this.props.classes.link,to:"/categories"},r.a.createElement(N.u,null,r.a.createElement(N.x,{primary:"Categories",secondary:"Manage your categories."})))))}}]),t}(n.Component),wt=Object(b.withStyles)({link:{textDecoration:"none"}})(vt),Ot=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={accounts:[],new:{showModal:!1,name:"",error:!1},edit:{accountId:0,showModal:!1,name:"",error:!1},delete:{accountId:0,showModal:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("account");case 2:t=e.sent,this.setState(Object(f.a)({},this.state,{accounts:t}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showEditModal",value:function(e){var t=this.state.accounts.find(function(t){return t.accountId===e});null!==t&&void 0!==t&&1!==t.accountId&&this.setState(Object(f.a)({},this.state,{edit:{accountId:t.accountId,name:t.name,error:!1,showModal:!0}}))}},{key:"saveAdd",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.new.name,this.setState(Object(f.a)({},this.state,{new:Object(f.a)({},this.state.new,{error:!1})})),null!==t&&void 0!==t&&""!==t){e.next=6;break}this.setState(Object(f.a)({},this.state,{new:Object(f.a)({},this.state.new,{error:!0})})),e.next=14;break;case 6:return e.next=8,ve("account",{name:t});case 8:if(!e.sent){e.next=14;break}return e.next=12,fe("account");case 12:a=e.sent,this.setState(Object(f.a)({},this.state,{accounts:a,new:Object(f.a)({},this.state.new,{showModal:!1})}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveEdit",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.edit.name,this.setState(Object(f.a)({},this.state,{edit:Object(f.a)({},this.state.edit,{error:!1})})),null!==t&&void 0!==t&&""!==t){e.next=6;break}this.setState(Object(f.a)({},this.state,{edit:Object(f.a)({},this.state.edit,{error:!0})})),e.next=14;break;case 6:return e.next=8,Oe("account",{accountId:this.state.edit.accountId,name:t});case 8:if(!e.sent){e.next=14;break}return e.next=12,fe("account");case 12:a=e.sent,this.setState(Object(f.a)({},this.state,{accounts:a,edit:Object(f.a)({},this.state.edit,{showModal:!1})}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke("account",this.state.delete.accountId);case 2:if(!e.sent){e.next=8;break}return e.next=6,fe("account");case 6:t=e.sent,this.setState(Object(f.a)({},this.state,{accounts:t,delete:{accountId:0,showModal:!1}}));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Accounts",buttons:[]}),r.a.createElement(N.t,null,this.state.accounts.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(N.u,{button:!0,onClick:e.showEditModal.bind(e,t.accountId)},r.a.createElement(N.x,{primary:t.name,secondary:1===t.accountId?"This is the default account, you can't do anything about it.":""}),1!==t.accountId?r.a.createElement(N.w,null,r.a.createElement(N.p,{onClick:function(){return e.setState(Object(f.a)({},e.state,{delete:{accountId:t.accountId,showModal:!0}}))}},r.a.createElement(it.a,null))):null),r.a.createElement(N.l,null))})),r.a.createElement(N.m,{color:"primary",onClick:function(){return e.setState(Object(f.a)({},e.state,{new:Object(f.a)({},e.state.new,{showModal:!0})}))},className:this.props.classes.addButton},r.a.createElement(Q.a,null)),r.a.createElement(kt,{isOpen:this.state.new.showModal,value:this.state.new.name,error:this.state.new.error,changeValue:function(t){e.setState(Object(f.a)({},e.state,{new:Object(f.a)({},e.state.new,{name:t.target.value})}))},close:function(){return e.setState(Object(f.a)({},e.state,{new:Object(f.a)({},e.state.new,{showModal:!1,name:""})}))},save:this.saveAdd.bind(this)}),r.a.createElement(xt,{isOpen:this.state.edit.showModal,value:this.state.edit.name,error:this.state.edit.error,changeValue:function(t){e.setState(Object(f.a)({},e.state,{edit:Object(f.a)({},e.state.edit,{name:t.target.value})}))},close:function(){return e.setState(Object(f.a)({},e.state,{edit:Object(f.a)({},e.state.edit,{showModal:!1})}))},save:this.saveEdit.bind(this)}),r.a.createElement(jt,{isOpen:this.state.delete.showModal,close:function(){return e.setState(Object(f.a)({},e.state,{delete:Object(f.a)({},e.state.delete,{showModal:!1})}))},delete:this.delete.bind(this)}))}}]),t}(n.Component),kt=function(e){return r.a.createElement(N.g,{open:e.isOpen},r.a.createElement(N.k,null,"Add new account"),r.a.createElement(N.l,null),r.a.createElement(N.i,null,r.a.createElement(N.B,{error:e.error,className:"form-control",label:"Account name",onChange:e.changeValue.bind(void 0),margin:"normal"})),r.a.createElement(N.l,null),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:e.close,color:"default"},"Cancel"),r.a.createElement(N.c,{onClick:e.save,color:"primary",autoFocus:!0},"Save")))},xt=function(e){return r.a.createElement(N.g,{open:e.isOpen},r.a.createElement(N.k,null,"Edit account"),r.a.createElement(N.l,null),r.a.createElement(N.i,null,r.a.createElement(N.B,{error:e.error,className:"form-control",label:"Account name",value:e.value,onChange:e.changeValue.bind(void 0),margin:"normal"})),r.a.createElement(N.l,null),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:e.close,color:"default"},"Cancel"),r.a.createElement(N.c,{onClick:e.save,color:"primary",autoFocus:!0},"Save")))},jt=function(e){return r.a.createElement(N.g,{open:e.isOpen},r.a.createElement(N.k,null,"Confirm"),r.a.createElement(N.i,null,r.a.createElement(N.j,null,"Are you sure you want to delete this account?"),r.a.createElement(N.j,null,"This action cannot be undone.")),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:e.close,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(N.c,{onClick:e.delete,color:"secondary"},"Delete")))},Ct=Object(b.withStyles)({link:{textDecoration:"none"},addButton:{position:"fixed",bottom:15,right:15}})(Ot),It=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={categories:[],new:{showModal:!1,name:"",error:!1},edit:{categoryId:0,showModal:!1,name:"",error:!1},delete:{categoryId:0,showModal:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("category");case 2:t=e.sent,this.setState(Object(f.a)({},this.state,{categories:t}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showEditModal",value:function(e){var t=this.state.categories.find(function(t){return t.categoryId===e});null!==t&&void 0!==t&&-1===[1,2,3].indexOf(t.categoryId)&&this.setState(Object(f.a)({},this.state,{edit:{categoryId:t.categoryId,name:t.name,error:!1,showModal:!0}}))}},{key:"saveAdd",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.new.name,this.setState(Object(f.a)({},this.state,{new:Object(f.a)({},this.state.new,{error:!1})})),null!==t&&void 0!==t&&""!==t){e.next=6;break}this.setState(Object(f.a)({},this.state,{new:Object(f.a)({},this.state.new,{error:!0})})),e.next=14;break;case 6:return e.next=8,ve("category",{name:t});case 8:if(!e.sent){e.next=14;break}return e.next=12,fe("category");case 12:a=e.sent,this.setState(Object(f.a)({},this.state,{categories:a,new:Object(f.a)({},this.state.new,{showModal:!1})}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveEdit",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.edit.name,this.setState(Object(f.a)({},this.state,{edit:Object(f.a)({},this.state.edit,{error:!1})})),null!==t&&void 0!==t&&""!==t){e.next=6;break}this.setState(Object(f.a)({},this.state,{edit:Object(f.a)({},this.state.edit,{error:!0})})),e.next=14;break;case 6:return e.next=8,Oe("category",{categoryId:this.state.edit.categoryId,name:t});case 8:if(!e.sent){e.next=14;break}return e.next=12,fe("category");case 12:a=e.sent,this.setState(Object(f.a)({},this.state,{categories:a,edit:Object(f.a)({},this.state.edit,{showModal:!1})}));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke("category",this.state.delete.categoryId);case 2:if(!e.sent){e.next=8;break}return e.next=6,fe("category");case 6:t=e.sent,this.setState(Object(f.a)({},this.state,{categories:t,delete:{categoryId:0,showModal:!1}}));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Categories",buttons:[]}),r.a.createElement(N.t,null,this.state.categories.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(N.u,{button:!0,onClick:e.showEditModal.bind(e,t.categoryId)},r.a.createElement(N.x,{primary:t.name,secondary:-1!==[1,2,3].indexOf(t.categoryId)?"This is the default category, you can't do anything about it.":""}),-1===[1,2,3].indexOf(t.categoryId)?r.a.createElement(N.w,null,r.a.createElement(N.p,{onClick:function(){return e.setState(Object(f.a)({},e.state,{delete:{categoryId:t.categoryId,showModal:!0}}))}},r.a.createElement(it.a,null))):null),r.a.createElement(N.l,null))})),r.a.createElement(N.m,{color:"primary",onClick:function(){return e.setState(Object(f.a)({},e.state,{new:Object(f.a)({},e.state.new,{showModal:!0})}))},className:this.props.classes.addButton},r.a.createElement(Q.a,null)),r.a.createElement(Dt,{isOpen:this.state.new.showModal,value:this.state.new.name,error:this.state.new.error,changeValue:function(t){e.setState(Object(f.a)({},e.state,{new:Object(f.a)({},e.state.new,{name:t.target.value})}))},close:function(){return e.setState(Object(f.a)({},e.state,{new:Object(f.a)({},e.state.new,{showModal:!1,name:""})}))},save:this.saveAdd.bind(this)}),r.a.createElement(St,{isOpen:this.state.edit.showModal,value:this.state.edit.name,error:this.state.edit.error,changeValue:function(t){e.setState(Object(f.a)({},e.state,{edit:Object(f.a)({},e.state.edit,{name:t.target.value})}))},close:function(){return e.setState(Object(f.a)({},e.state,{edit:Object(f.a)({},e.state.edit,{showModal:!1})}))},save:this.saveEdit.bind(this)}),r.a.createElement(Nt,{isOpen:this.state.delete.showModal,close:function(){return e.setState(Object(f.a)({},e.state,{delete:Object(f.a)({},e.state.delete,{showModal:!1})}))},delete:this.delete.bind(this)}))}}]),t}(n.Component),Dt=function(e){return r.a.createElement(N.g,{open:e.isOpen},r.a.createElement(N.k,null,"Add new category"),r.a.createElement(N.l,null),r.a.createElement(N.i,null,r.a.createElement(N.B,{error:e.error,className:"form-control",label:"Category name",onChange:e.changeValue.bind(void 0),margin:"normal"})),r.a.createElement(N.l,null),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:e.close,color:"default"},"Cancel"),r.a.createElement(N.c,{onClick:e.save,color:"primary",autoFocus:!0},"Save")))},St=function(e){return r.a.createElement(N.g,{open:e.isOpen},r.a.createElement(N.k,null,"Edit category"),r.a.createElement(N.l,null),r.a.createElement(N.i,null,r.a.createElement(N.B,{error:e.error,className:"form-control",label:"Category name",value:e.value,onChange:e.changeValue.bind(void 0),margin:"normal"})),r.a.createElement(N.l,null),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:e.close,color:"default"},"Cancel"),r.a.createElement(N.c,{onClick:e.save,color:"primary",autoFocus:!0},"Save")))},Nt=function(e){return r.a.createElement(N.g,{open:e.isOpen},r.a.createElement(N.k,null,"Confirm"),r.a.createElement(N.i,null,r.a.createElement(N.j,null,"Are you sure you want to delete this category?"),r.a.createElement(N.j,null,"This action cannot be undone.")),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:e.close,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(N.c,{onClick:e.delete,color:"secondary"},"Delete")))},Mt=Object(b.withStyles)({link:{textDecoration:"none"},addButton:{position:"fixed",bottom:15,right:15}})(It),At=a(168),Bt=a.n(At),Pt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={templates:[],showDelete:!1,idForDelete:0},a.toggleDelete=function(e){a.setState(Object(f.a)({},a.state,{idForDelete:e,showDelete:!a.state.showDelete}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("expenseTemplate");case 2:t=e.sent,this.setState(Object(f.a)({},this.state,{templates:t}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke("expenseTemplate",this.state.idForDelete);case 2:if(!e.sent){e.next=8;break}return e.next=6,fe("expenseTemplate");case 6:t=e.sent,this.setState(Object(f.a)({},this.state,{templates:t,showDelete:!1}));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{title:"Expense templates",buttons:[]}),r.a.createElement(N.t,null,this.state.templates.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(N.u,{button:!0,onClick:function(){e.props.history.push("/expensetemplates/edit/".concat(t.expenseTemplateId))}},r.a.createElement(N.x,{primary:t.templateName}),r.a.createElement(N.w,null,r.a.createElement(N.p,{onClick:e.toggleDelete.bind(e,t.expenseTemplateId)},r.a.createElement(it.a,null)))),r.a.createElement(N.l,null))})),0===this.state.templates.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:Bt.a,className:this.props.classes.thinkingMeme})):null,r.a.createElement(N.m,{color:"primary",onClick:function(){e.props.history.push("/expensetemplates/new")},className:this.props.classes.addButton},r.a.createElement(Q.a,null)),r.a.createElement(N.g,{open:this.state.showDelete},r.a.createElement(N.k,null,"Confirm"),r.a.createElement(N.i,null,r.a.createElement(N.j,null,"Are you sure you want to delete this template?"),r.a.createElement(N.j,null,"This action cannot be undone.")),r.a.createElement(N.h,null,r.a.createElement(N.c,{onClick:this.toggleDelete.bind(this,0),color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(N.c,{onClick:this.delete.bind(this),color:"secondary"},"Delete"))))}}]),t}(n.Component),Tt=Object(b.withStyles)({link:{textDecoration:"none"},addButton:{position:"fixed",bottom:15,right:15},thinkingMeme:{width:100,position:"absolute",bottom:0,right:100},noContent:{color:"primary",fontSize:20,textAlign:"center",position:"absolute",bottom:250,width:"100%"}})(Pt),Ft=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={templateName:"",title:"",categoryId:0,amount:"",accountId:0,description:"",accounts:[],categories:[],errors:{templateName:!1,title:!1,category:!1,amount:!1,account:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("account");case 2:return t=e.sent,e.next=5,fe("category");case 5:a=e.sent,this.setState(Object(f.a)({},this.state,{accounts:t,categories:a}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;"accountId"!==e&&"categoryId"!==e||(a=parseInt(t.target.value)),this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"formatCurrency",value:function(e){var t=ge(this.state.amount);this.setState(Object(f.a)({},this.state,{amount:t}))}},{key:"handleSave",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={templateName:this.state.templateName,title:this.state.title,categoryId:this.state.categoryId,accountId:this.state.accountId,amount:parseFloat(this.state.amount.replace(/,/g,"")),description:this.state.description},a=!1,n={templateName:!1,title:!1,category:!1,amount:!1,account:!1},""===t.templateName&&(n.templateName=!0,a=!0),""===t.title&&(n.title=!0,a=!0),(0===t.amount||isNaN(t.amount))&&(n.amount=!0,a=!0),0===t.accountId&&(n.account=!0,a=!0),0===t.categoryId&&(n.category=!0,a=!0),!a){e.next=12;break}this.setState(Object(f.a)({},this.state,{errors:n})),e.next=16;break;case 12:return e.next=14,ve("expenseTemplate",t);case 14:e.sent&&this.props.history.push("/expensetemplates");case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Add expense template",buttons:[r.a.createElement(C.a,{onClick:this.handleSave.bind(this),color:"inherit"},r.a.createElement(Qe.a,null))]}),r.a.createElement("div",{className:"content"},r.a.createElement(Ze.a,{error:this.state.errors.templateName,label:"Template name",value:this.state.templateName,onChange:this.handleChangeProperty.bind(this,"templateName"),margin:"normal",className:"form-control"}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Account"),r.a.createElement(rt.a,{error:this.state.errors.account,value:this.state.accountId,onChange:this.handleChangeProperty.bind(this,"accountId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select account")),this.state.accounts.map(function(e){return r.a.createElement(ot.a,{key:e.accountId,value:e.accountId},e.name)}))),r.a.createElement(Ze.a,{error:this.state.errors.title,label:"Title",value:this.state.title,onChange:this.handleChangeProperty.bind(this,"title"),margin:"normal",className:"form-control"}),r.a.createElement(Ze.a,{error:this.state.errors.amount,label:"Amount",value:this.state.amount,onChange:this.handleChangeProperty.bind(this,"amount"),margin:"normal",className:"form-control",onBlur:this.formatCurrency.bind(this)}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Category"),r.a.createElement(rt.a,{error:this.state.errors.category,value:this.state.categoryId,onChange:this.handleChangeProperty.bind(this,"categoryId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select category")),this.state.categories.map(function(e){return r.a.createElement(ot.a,{key:e.categoryId,value:e.categoryId},e.name)}))),r.a.createElement(Ze.a,{className:"form-control",label:"Notes",multiline:!0,rows:"6",value:this.state.description,onChange:this.handleChangeProperty.bind(this,"description"),margin:"normal"})))}}]),t}(n.Component),qt=Object(b.withStyles)({myClass:{font:20,textAlign:"center",width:"100%"}})(Ft),Yt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expenseTemplateId:0,templateName:"",title:"",categoryId:0,amount:"",accountId:0,description:"",accounts:[],categories:[],errors:{templateName:!1,title:!1,category:!1,amount:!1,account:!1}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("account");case 2:return t=e.sent,e.next=5,fe("category");case 5:return a=e.sent,e.next=8,ye("expenseTemplate",Number(this.props.match.params.id));case 8:(n=e.sent).amount=n.amount.toString(),this.setState(Object(f.a)({},this.state,n,{accounts:t,categories:a}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeProperty",value:function(e,t){var a=t.target.value;"accountId"!==e&&"categoryId"!==e||(a=parseInt(t.target.value)),this.setState(Object(f.a)({},this.state,Object(Fe.a)({},e,a)))}},{key:"formatCurrency",value:function(e){var t=ge(this.state.amount);this.setState(Object(f.a)({},this.state,{amount:t}))}},{key:"handleSave",value:function(){var e=Object(y.a)(g.a.mark(function e(){var t,a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={expenseTemplateId:this.state.expenseTemplateId,templateName:this.state.templateName,title:this.state.title,categoryId:this.state.categoryId,accountId:this.state.accountId,amount:parseFloat(this.state.amount.replace(/,/g,"")),description:this.state.description},a=!1,n={templateName:!1,title:!1,category:!1,amount:!1,account:!1},""===t.templateName&&(n.templateName=!0,a=!0),""===t.title&&(n.title=!0,a=!0),(0===t.amount||isNaN(t.amount))&&(n.amount=!0,a=!0),0===t.accountId&&(n.account=!0,a=!0),0===t.categoryId&&(n.category=!0,a=!0),!a){e.next=12;break}this.setState(Object(f.a)({},this.state,{errors:n})),e.next=16;break;case 12:return e.next=14,Oe("expenseTemplate",t);case 14:e.sent&&this.props.history.push("/expensetemplates");case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{onBack:function(){e.props.history.goBack()},showBackButton:!0,title:"Edit expense template",buttons:[r.a.createElement(C.a,{onClick:this.handleSave.bind(this),color:"inherit"},r.a.createElement(Qe.a,null))]}),r.a.createElement("div",{className:"content"},r.a.createElement(Ze.a,{error:this.state.errors.templateName,label:"Template name",value:this.state.templateName,onChange:this.handleChangeProperty.bind(this,"templateName"),margin:"normal",className:"form-control"}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Account"),r.a.createElement(rt.a,{error:this.state.errors.account,value:this.state.accountId,onChange:this.handleChangeProperty.bind(this,"accountId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select account")),this.state.accounts.map(function(e){return r.a.createElement(ot.a,{key:e.accountId,value:e.accountId},e.name)}))),r.a.createElement(Ze.a,{error:this.state.errors.title,label:"Title",value:this.state.title,onChange:this.handleChangeProperty.bind(this,"title"),margin:"normal",className:"form-control"}),r.a.createElement(Ze.a,{error:this.state.errors.amount,label:"Amount",value:this.state.amount,onChange:this.handleChangeProperty.bind(this,"amount"),margin:"normal",className:"form-control",onBlur:this.formatCurrency.bind(this)}),r.a.createElement(et.a,{className:"form-control",margin:"normal"},r.a.createElement(at.a,null,"Category"),r.a.createElement(rt.a,{error:this.state.errors.category,value:this.state.categoryId,onChange:this.handleChangeProperty.bind(this,"categoryId")},r.a.createElement(ot.a,{value:0},r.a.createElement("em",null,"select category")),this.state.categories.map(function(e){return r.a.createElement(ot.a,{key:e.categoryId,value:e.categoryId},e.name)}))),r.a.createElement(Ze.a,{className:"form-control",label:"Notes",multiline:!0,rows:"6",value:this.state.description,onChange:this.handleChangeProperty.bind(this,"description"),margin:"normal"})))}}]),t}(n.Component),Rt=Object(b.withStyles)({myClass:{font:20,textAlign:"center",width:"100%"}})(Yt),Vt=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(d.a,null,r.a.createElement(h.a,{path:"/income",component:We}),r.a.createElement(h.a,{path:"/expense/edit/:id",component:ut}),r.a.createElement(h.a,{path:"/expense/new/:templateId",component:ct}),r.a.createElement(h.a,{path:"/expense",component:Le}),r.a.createElement(h.a,{path:"/budget/edit/:id",component:yt}),r.a.createElement(h.a,{path:"/budget/new",component:Et}),r.a.createElement(h.a,{path:"/budget",component:ht}),r.a.createElement(h.a,{path:"/settings",component:wt}),r.a.createElement(h.a,{path:"/accounts",component:Ct}),r.a.createElement(h.a,{path:"/categories",component:Mt}),r.a.createElement(h.a,{path:"/expensetemplates/edit/:id",component:Rt}),r.a.createElement(h.a,{path:"/expensetemplates/new",component:qt}),r.a.createElement(h.a,{path:"/expensetemplates",component:Tt}),r.a.createElement(h.a,{path:"/",component:Te})))}}]),t}(n.Component),zt=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper animate slideInRight"},r.a.createElement(Vt,null))}}]),t}(n.Component),Ht=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Lt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Wt=a(399),Gt=a(67),Jt=(a(395),a(396),window.matchMedia("(display-mode: standalone)").matches?Object(Gt.b)():Object(Gt.a)());!function(){var e=window.indexedDB.open("Moneytoring",8);e.onupgradeneeded=function(e){var t,a=e.target.result;if(!a.objectStoreNames.contains("expenseTemplate")){var n=a.createObjectStore("expenseTemplate",{keyPath:"expenseTemplateId",autoIncrement:!0});n.createIndex("title","title",{unique:!1}),n.createIndex("templateName","templateName",{unique:!1}),n.createIndex("amount","amount",{unique:!1}),n.createIndex("categoryId","categoryId",{unique:!1}),n.createIndex("accountId","accountId",{unique:!1}),n.createIndex("description","description",{unique:!1})}if(!a.objectStoreNames.contains("expense")){var r=a.createObjectStore("expense",{keyPath:"expenseId",autoIncrement:!0});r.createIndex("expenseId","expenseId",{unique:!0}),r.createIndex("title","title",{unique:!1}),r.createIndex("categoryId","categoryId",{unique:!1}),r.createIndex("amount","amount",{unique:!1}),r.createIndex("accountId","accountId",{unique:!1}),r.createIndex("description","description",{unique:!1}),r.createIndex("date","date",{unique:!1})}a.objectStoreNames.contains("account")||a.createObjectStore("account",{keyPath:"accountId",autoIncrement:!0}).createIndex("name","name",{unique:!1}),a.objectStoreNames.contains("category")||a.createObjectStore("category",{keyPath:"categoryId",autoIncrement:!0}).createIndex("name","name",{unique:!1}),a.objectStoreNames.contains("budget")?(t=e.currentTarget.transaction.objectStore("budget")).indexNames.contains("showInDashboard")||t.createIndex("showInDashboard","showInDashboard",{unique:!1}):((t=a.createObjectStore("budget",{keyPath:"budgetId",autoIncrement:!0})).createIndex("name","name",{unique:!1}),t.createIndex("repeat","repeat",{unique:!1}),t.createIndex("startDate","startDate",{unique:!1}),t.createIndex("endDate","endDate",{unique:!1}),t.createIndex("amount","amount",{unique:!1}),t.createIndex("accountIds","accountIds",{unique:!1}),t.createIndex("isActive","isActive",{unique:!1}),t.createIndex("categoryIds","categoryIds",{unique:!1}),t.createIndex("ledger","ledger",{unique:!1}),t.createIndex("noEndDate","noEndDate",{unique:!1}))},e.onsuccess=function(e){var t=e.target.result,a=t.transaction(["account"],"readonly"),n=a.objectStore("account").getAll();a.oncomplete=function(e){0===n.result.length&&t.transaction(["account"],"readwrite").objectStore("account").put({name:"Personal"})};var r=t.transaction(["category"],"readonly"),s=r.objectStore("category").getAll();r.oncomplete=function(e){if(0===s.result.length){var a=t.transaction(["category"],"readwrite").objectStore("category");a.put({name:"Food"}),a.put({name:"Transportation"}),a.put({name:"Clothing"})}}}}(),o.a.render(r.a.createElement(Wt.a,{history:Jt,basename:"/moneytoring"},r.a.createElement(zt,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/moneytoring",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/moneytoring","/service-worker.js");Ht?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Lt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Lt(t,e)})}}()}},[[227,1,2]]]);
//# sourceMappingURL=main.29c7b88e.chunk.js.map